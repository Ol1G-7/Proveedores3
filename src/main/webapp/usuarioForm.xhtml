<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>#{empty usuarioBean.usuarioSeleccionado.id ? 'Agregar Nuevo Usuario' : 'Editar Usuario'}</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/>
    <h:outputStylesheet library="css" name="usuarios.css"/>
</h:head>
<h:body>
    <header class="main-header">
        <div class="logo-area">
            <h:graphicImage library="img" name="Logo.png" alt="Logo Proveedor 3 Motores"/>
        </div>
        <nav class="main-nav">
             <a href="dashboard.xhtml" class="nav-link">Inicio</a>
             <a href="usuarios.xhtml" class="nav-link active">Usuarios</a>
             <a href="#" class="nav-link">Ventas</a>
             <a href="#" class="nav-link">Inventario</a>
        </nav>
    </header>

    <main class="usuarios-main">
        <div class="form-container">
            <h1>#{empty usuarioBean.usuarioSeleccionado.id ? 'Agregar Nuevo Usuario' : 'Editar Usuario'}</h1>
            <p>Completa los siguientes campos para registrar al usuario en el sistema.</p>
            
            <h:form id="userForm">
                <div class="form-group">
                    <h:outputLabel for="nombre" value="Nombre completo:" />
                    <h:inputText id="nombre" value="#{usuarioBean.usuarioSeleccionado.nombre}" styleClass="form-control" required="true" requiredMessage="El nombre es obligatorio."/>
                    <h:message for="nombre" styleClass="error-message"/>
                </div>
                <div class="form-group">
                    <h:outputLabel for="correo" value="Correo electrónico:" />
                    <h:inputText id="correo" value="#{usuarioBean.usuarioSeleccionado.correo}" styleClass="form-control" required="true" requiredMessage="El correo es obligatorio."/>
                    <h:message for="correo" styleClass="error-message"/>
                </div>
                <div class="form-group">
                    <h:outputLabel for="password" value="Contraseña:" />
                    <h:inputSecret id="password" value="#{usuarioBean.usuarioSeleccionado.password}" styleClass="form-control" required="#{empty usuarioBean.usuarioSeleccionado.id}" requiredMessage="La contraseña es obligatoria para nuevos usuarios."/>
                    <h:message for="password" styleClass="error-message"/>
                    <small>Si estás editando, deja este campo en blanco para no cambiar la contraseña.</small>
                </div>
                 <div class="form-group">
                    <h:outputLabel for="rol" value="Rol:" />
                    <h:selectOneMenu id="rol" value="#{usuarioBean.usuarioSeleccionado.rol}" styleClass="form-control">
                        <f:selectItem itemValue="Admin" itemLabel="Administrador" />
                        <f:selectItem itemValue="User" itemLabel="Usuario" />
                    </h:selectOneMenu>
                </div>

                <div class="form-actions">
                    <h:commandButton value="Guardar Usuario" action="#{usuarioBean.guardarYRedirigir}" styleClass="usuarios-btn"/>
                    
                    <h:button value="Cancelar" outcome="usuarios.xhtml" styleClass="btn-secondary"/>
                </div>
            </h:form>
        </div>
    </main>
    
    </h:body>
</html>