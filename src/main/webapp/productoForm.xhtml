<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>#{empty productoBean.productoSeleccionado.id ? 'Agregar Nuevo Producto' : 'Editar Producto'}</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/>
        <h:outputStylesheet library="css" name="usuarios.css"/>
        <style>/* === ESTILOS GLOBALES === */
            body {
                font-family: 'Inter', system-ui, -apple-system, sans-serif;
                margin: 0;
                background-color: #f8f9fa;
                color: #212529;
                display: flex;
                flex-direction: column;
                min-height: 100vh;
            }

            /* === HEADER Y NAVEGACIÓN === */
            .main-header {
                background: #fff;
                border-bottom: 1px solid #dee2e6;
                padding: 1rem 2rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: sticky;
                top: 0;
                z-index: 1000;
            }
            .logo-area > h\:graphicImage {
                height: 48px;
            }
            .main-nav {
                display: flex;
                gap: 0.5rem;
            }
            .nav-link {
                text-decoration: none;
                color: #495057;
                font-weight: 600;
                padding: 0.5rem 1rem;
                border-radius: 0.5rem;
                transition: all 0.2s ease-in-out;
            }
            .nav-link.active, .nav-link:hover {
                color: #0d6efd;
                background-color: #e7f1ff;
            }

            /* === LAYOUT PRINCIPAL === */
            .page-main {
                flex: 1 0 auto;
                width: 100%;
                max-width: 1200px; /* Ancho máximo para el contenido */
                margin: 2.5rem auto;
                padding: 0 1rem;
                box-sizing: border-box;
            }

            .page-title-block {
                margin-bottom: 2rem;
            }
            .page-title {
                font-size: 2.25rem;
                font-weight: 800;
                margin: 0;
                letter-spacing: -1px;
            }
            .page-desc {
                font-size: 1.1rem;
                color: #6c757d;
                margin-top: 0.25rem;
            }

            /* === FORMULARIOS === */
            .form-container {
                max-width: 700px; /* Ancho ideal para formularios */
                margin: 0 auto;
                background-color: #ffffff;
                padding: 2.5rem;
                border-radius: 0.75rem;
                border: 1px solid #dee2e6;
                box-shadow: 0 8px 24px rgba(0,0,0,0.05);
            }
            .form-group {
                margin-bottom: 1.5rem;
            }
            .form-group label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 600;
                font-size: 0.9rem;
                color: #495057;
            }
            .form-control {
                width: 100%;
                padding: 0.75rem 1rem;
                border: 1px solid #ced4da;
                border-radius: 0.5rem;
                font-size: 1rem;
                box-sizing: border-box;
                transition: border-color 0.2s, box-shadow 0.2s;
            }
            .form-control:focus {
                outline: none;
                border-color: #86b7fe;
                box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            }
            .form-actions {
                display: flex;
                justify-content: flex-end;
                gap: 0.75rem;
                margin-top: 2rem;
                padding-top: 1.5rem;
                border-top: 1px solid #e9ecef;
            }
            .error-message {
                color: #dc3545;
                font-size: 0.875rem;
                margin-top: 0.25rem;
            }

            /* === BOTONES === */
            .btn {
                border: none;
                padding: 0.75rem 1.5rem;
                font-size: 0.95rem;
                font-weight: 600;
                border-radius: 0.5rem;
                cursor: pointer;
                text-decoration: none; /* Para h:button */
                display: inline-block;
                text-align: center;
                transition: all 0.2s ease-in-out;
            }
            .btn-primary {
                background-color: #0d6efd;
                color: #fff;
            }
            .btn-primary:hover {
                background-color: #0b5ed7;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(13, 110, 253, 0.3);
            }
            .btn-secondary {
                background-color: #6c757d;
                color: #fff;
            }
            .btn-secondary:hover {
                background-color: #5c636a;
            }

            /* === TABLAS Y OTROS COMPONENTES (ya existentes) === */
            .data-table-block {
                background: #fff;
                border-radius: 0.75rem;
                border: 1px solid #dee2e6;
                padding: 1.5rem;
                box-shadow: 0 8px 24px rgba(0,0,0,0.05);
            }
            /* ... (el resto de tus estilos de tabla, badges, etc.) ... */</style>
    </h:head>
    <h:body>
        <header class="main-header">
        </header>
        <main class="page-main">
            <div class="form-container">
                <h1>#{empty productoBean.productoSeleccionado.id ? 'Agregar Nuevo Producto' : 'Editar Producto'}</h1>
                <p>Completa los siguientes campos para registrar el producto en el sistema.</p>

                <h:form id="productForm">
                    <div class="form-group">
                        <h:outputLabel for="codigo" value="Código de Producto:" />
                        <h:inputText id="codigo" value="#{productoBean.productoSeleccionado.codigoProducto}" styleClass="form-control"
                                     required="true" requiredMessage="El código es obligatorio."
                                     validator="#{productoBean.validarCodigoUnico}">
                            <f:validateLength minimum="3" />
                        </h:inputText>
                        <h:message for="codigo" styleClass="error-message"/>
                    </div>

                    <div class="form-group">
                        <h:outputLabel for="nombre" value="Nombre:" />
                        <h:inputText id="nombre" value="#{productoBean.productoSeleccionado.nombre}" styleClass="form-control"
                                     required="true" requiredMessage="El nombre es obligatorio.">
                            <f:validateLength minimum="3" />
                        </h:inputText>
                        <h:message for="nombre" styleClass="error-message"/>
                    </div>

                    <div class="form-group">
                        <h:outputLabel for="marca" value="Marca:" />
                        <h:selectOneMenu id="marca" value="#{productoBean.productoSeleccionado.marca}" 
                                         styleClass="form-control" required="true" requiredMessage="Debe seleccionar una marca.">
                            <f:selectItem itemValue="#{null}" itemLabel="-- Seleccione una --" />
                            <f:selectItem itemValue="WEG" itemLabel="WEG" />
                            <f:selectItem itemValue="Siemens" itemLabel="Siemens" />
                            <f:selectItem itemValue="Baldor" itemLabel="Baldor" />
                            <f:selectItem itemValue="Toshiba" itemLabel="Toshiba" />
                            <f:selectItem itemValue="Nidec" itemLabel="Nidec" />
                            <f:selectItem itemValue="Otro" itemLabel="Otro" />
                        </h:selectOneMenu>
                        <h:message for="marca" styleClass="error-message"/>
                    </div>

                    <div class="form-group">
                        <h:outputLabel for="categoria" value="Categoría:" />
                        <h:selectOneMenu id="categoria" value="#{productoBean.productoSeleccionado.categoria}" 
                                         styleClass="form-control" required="true" requiredMessage="Debe seleccionar una categoría.">
                            <f:selectItem itemValue="#{null}" itemLabel="-- Seleccione una --" />
                            <f:selectItem itemValue="Trifásico" itemLabel="Trifásico" />
                            <f:selectItem itemValue="Monofásico" itemLabel="Monofásico" />
                            <f:selectItem itemValue="Corriente Directa" itemLabel="Corriente Directa" />
                            <f:selectItem itemValue="Servomotor" itemLabel="Servomotor" />
                            <f:selectItem itemValue="Motorreductor" itemLabel="Motorreductor" />
                            <f:selectItem itemValue="Especial" itemLabel="Especial" />
                        </h:selectOneMenu>
                        <h:message for="categoria" styleClass="error-message"/>
                    </div>

                    <div class="form-group">
                        <h:outputLabel for="precio" value="Precio:" />
                        <h:inputText id="precio" value="#{productoBean.productoSeleccionado.precio}" styleClass="form-control"
                                     required="true" requiredMessage="El precio es obligatorio."
                                     converterMessage="El precio debe ser un número válido (ej. 1250.75).">
                            <f:convertNumber type="number" pattern="#0.00" />
                            <f:validateDoubleRange minimum="0.01" />
                        </h:inputText>
                        <h:message for="precio" styleClass="error-message"/>
                    </div>

                    <div class="form-actions">
                        <h:commandButton value="Guardar Producto" action="#{productoBean.guardarYRedirigir}" styleClass="btn btn-primary"/>
                        <h:button value="Cancelar" outcome="productos" styleClass="btn btn-secondary"/>
                    </div>
                </h:form>
            </div>
        </main>

        <footer class="main-footer">
            <div class="footer-content">
            </div>
        </footer>
    </h:body>
</html>